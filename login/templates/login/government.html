{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Government Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .sidebar {
            background-color: #052c65;
            min-height: 100vh;
            color: white;
        }
        .sidebar .nav-link {
            color: rgba(255, 255, 255, 0.8);
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            margin-bottom: 0.25rem;
        }
        .sidebar .nav-link:hover,
        .sidebar .nav-link.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }
        .sidebar .nav-link i {
            margin-right: 0.75rem;
        }
        .stat-card {
            border-left: 4px solid;
            transition: all 0.3s;
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }
        .card-citizens { border-left-color: #0d6efd; }
        .card-panchayats { border-left-color: #dc3545; }
        .card-assets { border-left-color: #198754; }
        .card-cultivation { border-left-color: #6f42c1; }
        .card-vaccination { border-left-color: #fd7e14; }
        .card-welfare { border-left-color: #0dcaf0; }
        .card-requests { border-left-color: #d63384; }
        .table-responsive {
            border-radius: 0.375rem;
            overflow: hidden;
        }
        .action-btn {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
        }
        .header-banner {
            background-color: #052c65;
            color: white;
            padding: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <div class="d-flex align-items-center justify-content-center mb-4">
                        <img src="{% static 'india.png' %}" alt="Government Logo" class="me-2" width="40">
                        <h5 class="mb-0">Government Portal</h5>
                    </div>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#">
                                <i class="fas fa-tachometer-alt"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#citizens">
                                <i class="fas fa-users"></i> Citizens
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#panchayats">
                                <i class="fas fa-building"></i> Panchayats
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#assets">
                                <i class="fas fa-cube"></i> Assets
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#cultivation">
                                <i class="fas fa-seedling"></i> Cultivation
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#vaccination">
                                <i class="fas fa-syringe"></i> Vaccination
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#welfare">
                                <i class="fas fa-hands-helping"></i> Welfare Programs
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#services">
                                <i class="fas fa-concierge-bell"></i> Service Requests
                            </a>
                        </li>
                    </ul>
                    <hr>
                    <div class="px-3 py-2">
                        <div class="d-flex align-items-center text-white text-decoration-none">
                            <img src="{% static 'india.png' %}" alt="Admin" class="rounded-circle me-2" width="32" height="32">
                            <div>
                                <strong>Government</strong>
                                <small class="d-block text-light">Government Official</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="header-banner d-flex justify-content-between align-items-center mb-4">
                    <h3 class="mb-0">Rural Development Government Dashboard</h3>
                </div>

                <!-- Statistics Overview -->
                <div class="row mb-4">
                    <div class="col-md-3 mb-3">
                        <div class="card stat-card card-citizens h-100">
                            <div class="card-body">
                                <h5 class="card-title">Citizens</h5>
                                <h3 class="card-text">{{ citizens.count }}</h3>
                                <p class="card-text text-muted">Total registered citizens</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="card stat-card card-panchayats h-100">
                            <div class="card-body">
                                <h5 class="card-title">Panchayats</h5>
                                <h3 class="card-text">{{ panchayats.count }}</h3>
                                <p class="card-text text-muted">Active panchayats</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="card stat-card card-assets h-100">
                            <div class="card-body">
                                <h5 class="card-title">Assets</h5>
                                <h3 class="card-text">{{ assets.count }}</h3>
                                <p class="card-text text-muted">Registered community assets</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="card stat-card card-requests h-100">
                            <div class="card-body">
                                <h5 class="card-title">Service Requests</h5>
                                <h3 class="card-text">{{ service_request.count }}</h3>
                                <p class="card-text text-muted">Pending requests</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Citizens Section -->
                <div id="citizens" class="mb-5">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4><i class="fas fa-users text-primary"></i> Citizens Registry</h4>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead class="table-primary">
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Panchayat</th>
                                            <th>Date of birth</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for citizen in citizens|slice:":5" %}
                                        <tr>
                                            <td>{{ citizen.citizenid }}</td>
                                            <td>{{ citizen.fullname }}</td>
                                            <td>{{ citizen.panchayatid.panchayatname }}</td>
                                            <td>{{ citizen.dateofbirth }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            <a href="{% url 'login:gov_citizens' %}" class="btn btn-link">View all citizens →</a>
                        </div>
                    </div>
                </div>

                <!-- Panchayats Section -->
                <div id="panchayats" class="mb-5">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4><i class="fas fa-building text-danger"></i> Panchayats</h4>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead class="table-danger">
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for panchayat in panchayats %}
                                        <tr>
                                            <td>{{ panchayat.panchayatid }}</td>
                                            <td>{{ panchayat.panchayatname }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Assets Section -->
                <div id="assets" class="mb-5">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4><i class="fas fa-cube text-success"></i> Community Assets</h4>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead class="table-success">
                                        <tr>
                                            <th>ID</th>
                                            <th>Type</th>
                                            <th>Location</th>
                                            <th>Condition</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for asset in assets|slice:":5" %}
                                        <tr>
                                            <td>{{ asset.assetid }}</td>
                                            <td>{{ asset.assettype }}</td>
                                            <td>{{ asset.location }}</td>
                                            <td>{{ asset.condition }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            <a href="{% url 'login:gov_assets' %}" class="btn btn-link">View all assets →</a>
                        </div>
                    </div>
                </div>

                <!-- Two Column Layout for Other Sections -->
                <div class="row">
                    <!-- Cultivation Section -->
                    <div class="col-md-6 mb-5">
                        <div id="cultivation">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h4><i class="fas fa-seedling text-purple"></i> Cultivation Records</h4>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm table-striped">
                                            <thead style="background-color: #e2d9f3;">
                                                <tr>
                                                    <th>Year</th>
                                                    <th>Crop</th>
                                                    <th>Area</th>
                                                    <th>Panchayat</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for record in cultivation|slice:":5" %}
                                                <tr>
                                                    <td>{{ record.year }}</td>
                                                    <td>{{ record.croptype }}</td>
                                                    <td>{{ record.cultivatedarea }} acres</td>
                                                    <td>{{ record.panchayatid.panchayatname }}</td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Vaccination Section -->
                    <div class="col-md-6 mb-5">
                        <div id="vaccination">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h4><i class="fas fa-syringe text-warning"></i> Vaccination Records</h4>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm table-striped">
                                            <thead class="table-warning">
                                                <tr>
                                                    <th>Citizen</th>
                                                    <th>Vaccine</th>
                                                    <th>Date</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for record in vaccinationrecords %}
                                                <tr>
                                                    <td>{{ record.citizenid.fullname }}</td>
                                                    <td>{{ record.vaccinename }}</td>
                                                    <td>{{ record.dateadministered }}</td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <!-- Welfare Programs Section -->
                    <div class="col-md-6 mb-5">
                        <div id="welfare">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h4><i class="fas fa-hands-helping text-info"></i> Welfare Programs</h4>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm table-striped">
                                            <thead class="table-info">
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Benefits</th>
                                                    <th>Department</th>
                                                    <th>Expirydate</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for scheme in welfareschemes %}
                                                <tr>
                                                    <td>{{ scheme.programname }}</td>
                                                    <td>{{ scheme.benefits }}</td>
                                                    <td>{{ scheme.managingdepartment }}</td>
                                                    <td>{{ scheme.expirydate }}</td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Service Requests Section -->
                    <div class="col-md-6 mb-5">
                        <div id="services">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h4><i class="fas fa-concierge-bell text-pink"></i> Service Requests</h4>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm table-striped">
                                            <thead style="background-color: #f5d0e3;">
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Requestor</th>
                                                    <th>Type</th>
                                                    <th>Status</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for request in service_request %}
                                                <tr>
                                                    <td>{{ request.requestid }}</td>
                                                    <td>{{ request.citizenid.fullname }}</td>
                                                    <td>{{ request.requesttype }}</td>
                                                    <td>
                                                        <span class="badge {% if request.status == 'Pending' %}bg-warning{% elif request.status == 'In Progress' %}bg-primary{% elif request.status == 'Resolved' %}bg-success{% endif %}">
                                                            {{ request.status }}
                                                        </span>
                                                    </td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <footer class="bg-light p-3 text-center mt-4 rounded">
                    <p class="mb-0">© 2025 Rural Development Administration Portal. All rights reserved.</p>
                </footer>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>